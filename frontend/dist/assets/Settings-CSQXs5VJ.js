import{F as i,E as e}from"./vendor-AZjfysqh.js";import{u as j}from"./index-CcBKZM2H.js";import"./router-CieCW4vl.js";const r=[{key:"dashboard",label:"Dashboard"},{key:"attendance",label:"Attendance"},{key:"leave",label:"Leave Requests"},{key:"teamManagement",label:"Team Management"},{key:"teamAttendance",label:"Team Attendance"},{key:"performanceAnalytics",label:"Performance Analytics"},{key:"taskManagement",label:"Task Management"},{key:"ragStatus",label:"RAG Status"}],c=["admin","manager","employee"],o={modules:Object.fromEntries(r.map(l=>[l.key,!0])),permissions:Object.fromEntries(c.map(l=>[l,Object.fromEntries(r.map(t=>[t.key,l==="admin"?!0:l==="manager"?["dashboard","attendance","teamManagement","teamAttendance","performanceAnalytics","taskManagement","ragStatus"].includes(t.key):["dashboard","attendance","leave"].includes(t.key)]))]))};function A(){const{currentUser:l}=j(),[t,m]=i.useState(()=>{try{const s=localStorage.getItem("erpSettings");return s?{...o,...JSON.parse(s)}:o}catch{return o}}),[h,p]=i.useState(null);i.useEffect(()=>{localStorage.setItem("erpSettings",JSON.stringify(t))},[t]);const b=(s,d)=>{m(a=>({...a,modules:{...a.modules,[s]:d}}))},g=(s,d,a)=>{m(n=>({...n,permissions:{...n.permissions,[s]:{...n.permissions[s],[d]:a}}}))},x=()=>{try{localStorage.setItem("erpSettings",JSON.stringify(t)),p(new Date)}catch{alert("Failed to save settings")}},y=s=>s?s.toLocaleString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):null;return e.jsxs("div",{className:"dashboard fade-in",children:[e.jsxs("div",{className:"dashboard-header",children:[e.jsxs("div",{children:[e.jsx("h2",{children:"⚙️ System Settings"}),e.jsx("p",{children:"Configure ERP modules, permissions, and integrations."}),h&&e.jsxs("small",{style:{color:"#6b7280"},children:["Last saved: ",y(h)]})]}),e.jsx("div",{children:e.jsx("button",{className:"btn-primary",onClick:x,children:"Save Changes"})})]}),e.jsxs("div",{className:"dashboard-card",children:[e.jsx("h3",{children:"Modules"}),e.jsx("p",{style:{marginTop:0},children:"Enable or disable ERP modules globally. Disabled modules will be hidden for all roles."}),e.jsxs("table",{className:"user-table",style:{width:"100%",borderCollapse:"collapse",marginTop:12},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:"#f5f5f5",borderBottom:"2px solid #ddd"},children:[e.jsx("th",{style:{padding:12,textAlign:"left",border:"1px solid #ddd"},children:"Module"}),e.jsx("th",{style:{padding:12,textAlign:"center",border:"1px solid #ddd"},children:"Enabled"})]})}),e.jsx("tbody",{children:r.map(s=>e.jsxs("tr",{style:{borderBottom:"1px solid #eee"},children:[e.jsx("td",{style:{padding:12,border:"1px solid #ddd"},children:s.label}),e.jsx("td",{style:{padding:12,textAlign:"center",border:"1px solid #ddd"},children:e.jsx("input",{type:"checkbox",checked:!!t.modules[s.key],onChange:d=>b(s.key,d.target.checked)})})]},s.key))})]})]}),e.jsxs("div",{className:"dashboard-card",style:{marginTop:16},children:[e.jsx("h3",{children:"Permissions"}),e.jsx("p",{style:{marginTop:0},children:"Role-based access per module. A module must be enabled above to be accessible."}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{className:"user-table",style:{width:"100%",borderCollapse:"collapse",marginTop:12,minWidth:720},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:"#f5f5f5",borderBottom:"2px solid #ddd"},children:[e.jsx("th",{style:{padding:12,textAlign:"left",border:"1px solid #ddd"},children:"Module"}),c.map(s=>e.jsx("th",{style:{padding:12,textAlign:"center",border:"1px solid #ddd",textTransform:"capitalize"},children:s},s))]})}),e.jsx("tbody",{children:r.map(s=>e.jsxs("tr",{style:{borderBottom:"1px solid #eee"},children:[e.jsx("td",{style:{padding:12,border:"1px solid #ddd"},children:s.label}),c.map(d=>{var a,n;return e.jsx("td",{style:{padding:12,textAlign:"center",border:"1px solid #ddd"},children:e.jsx("input",{type:"checkbox",checked:!!((n=(a=t.permissions)==null?void 0:a[d])!=null&&n[s.key]),onChange:u=>g(d,s.key,u.target.checked),disabled:!t.modules[s.key],title:t.modules[s.key]?void 0:"Module disabled"})},d)})]},s.key))})]})})]}),e.jsxs("div",{className:"dashboard-card",style:{marginTop:16},children:[e.jsx("h3",{children:"Integrations"}),e.jsx("p",{style:{marginTop:0},children:"Connect ERP with third-party tools (Slack, Gmail, etc.)."}),e.jsx("p",{style:{color:"#6b7280"},children:"Coming soon — this section can store API keys securely and manage integration toggles."})]})]})}export{A as default};
