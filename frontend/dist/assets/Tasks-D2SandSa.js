import{F as c,E as e}from"./vendor-AZjfysqh.js";import{u as y}from"./index-CcBKZM2H.js";import"./router-CieCW4vl.js";function S(){const{currentUser:a,listTasksForUser:g,updateTask:h}=y(),[s,l]=c.useState([]),[r,i]=c.useState("all");c.useEffect(()=>{p()},[a]);const p=async()=>{if(!(a!=null&&a.email)){l([]);return}try{const t=await g(a.email);l(t||[])}catch(t){console.warn("Failed to load tasks",t),l([])}},d=async(t,f)=>{try{await h(t,{status:f,lastUpdated:new Date().toISOString()}),await p()}catch(o){alert((o==null?void 0:o.message)||"Failed to update task")}},m=t=>{switch(t){case"completed":return"#28a745";case"in-progress":return"#ffc107";case"pending":return"#6c757d";case"overdue":return"#dc3545";default:return"#6c757d"}},u=t=>{switch(t){case"high":return"#dc3545";case"medium":return"#ffc107";case"low":return"#28a745";default:return"#6c757d"}},x=s.filter(t=>r==="all"?!0:t.status===r),n={total:s.length,pending:s.filter(t=>t.status==="pending").length,inProgress:s.filter(t=>t.status==="in-progress").length,completed:s.filter(t=>t.status==="completed").length,overdue:s.filter(t=>t.status==="overdue").length};return e.jsxs("div",{className:"dashboard fade-in",children:[e.jsx("h2",{children:"ðŸ“ My Tasks"}),e.jsxs("div",{className:"dashboard-grid",style:{marginBottom:"16px",gap:"12px",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))"},children:[e.jsxs("div",{className:"dashboard-card",style:{background:"#f8f9fa",padding:"14px",borderRadius:"10px"},children:[e.jsx("h3",{style:{color:"#495057",fontSize:"16px",marginBottom:"6px"},children:"ðŸ“Š Total"}),e.jsx("p",{style:{fontSize:"18px",fontWeight:"bold",color:"#495057",margin:0},children:n.total})]}),e.jsxs("div",{className:"dashboard-card",style:{background:"#fff3cd",padding:"14px",borderRadius:"10px"},children:[e.jsx("h3",{style:{color:"#856404",fontSize:"16px",marginBottom:"6px"},children:"â³ Pending"}),e.jsx("p",{style:{fontSize:"18px",fontWeight:"bold",color:"#856404",margin:0},children:n.pending})]}),e.jsxs("div",{className:"dashboard-card",style:{background:"#d1ecf1",padding:"14px",borderRadius:"10px"},children:[e.jsx("h3",{style:{color:"#0c5460",fontSize:"16px",marginBottom:"6px"},children:"ðŸ”„ In Progress"}),e.jsx("p",{style:{fontSize:"18px",fontWeight:"bold",color:"#0c5460",margin:0},children:n.inProgress})]}),e.jsxs("div",{className:"dashboard-card",style:{background:"#d4edda",padding:"14px",borderRadius:"10px"},children:[e.jsx("h3",{style:{color:"#155724",fontSize:"16px",marginBottom:"6px"},children:"âœ… Completed"}),e.jsx("p",{style:{fontSize:"18px",fontWeight:"bold",color:"#155724",margin:0},children:n.completed})]})]}),e.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[e.jsx("button",{className:r==="all"?"btn-primary":"btn-outline",onClick:()=>i("all"),children:"All Tasks"}),e.jsx("button",{className:r==="pending"?"btn-primary":"btn-outline",onClick:()=>i("pending"),children:"Pending"}),e.jsx("button",{className:r==="in-progress"?"btn-primary":"btn-outline",onClick:()=>i("in-progress"),children:"In Progress"}),e.jsx("button",{className:r==="completed"?"btn-primary":"btn-outline",onClick:()=>i("completed"),children:"Completed"})]}),e.jsx("div",{className:"dashboard-card",children:x.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#6c757d"},children:[e.jsx("h3",{children:"ðŸ“­ No Tasks Found"}),e.jsx("p",{children:"No tasks have been assigned to you yet."})]}):e.jsx("div",{style:{display:"grid",gap:"15px"},children:x.map(t=>e.jsxs("div",{className:"dashboard-card",style:{border:"1px solid #dee2e6"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"10px"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("h4",{style:{margin:"0 0 5px 0",color:"#212529"},children:t.title}),e.jsx("p",{style:{margin:"0 0 10px 0",color:"#6c757d"},children:t.description})]}),e.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[e.jsxs("span",{className:"status-badge",style:{backgroundColor:u(t.priority),color:"white",textTransform:"capitalize"},children:[t.priority," Priority"]}),e.jsx("span",{className:"status-badge",style:{backgroundColor:m(t.status),color:"white",textTransform:"capitalize"},children:t.status.replace("-"," ")})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"10px",fontSize:"14px",color:"#6c757d"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Assigned By:"})," ",t.assignedBy||"System"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Due Date:"})," ",t.dueDate?new Date(t.dueDate).toLocaleDateString():"No deadline"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Created:"})," ",new Date(t.createdAt).toLocaleDateString()]}),t.lastUpdated&&e.jsxs("div",{children:[e.jsx("strong",{children:"Updated:"})," ",new Date(t.lastUpdated).toLocaleDateString()]})]}),e.jsxs("div",{style:{marginTop:"15px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[t.status!=="in-progress"&&e.jsx("button",{className:"btn-outline",onClick:()=>d(t.id,"in-progress"),style:{fontSize:"12px",padding:"5px 10px"},children:"Start Task"}),t.status!=="completed"&&e.jsx("button",{className:"btn-primary",onClick:()=>d(t.id,"completed"),style:{fontSize:"12px",padding:"5px 10px"},children:"Mark Complete"}),t.status==="completed"&&e.jsx("button",{className:"btn-outline",onClick:()=>d(t.id,"in-progress"),style:{fontSize:"12px",padding:"5px 10px"},children:"Reopen Task"})]})]},t.id))})})]})}export{S as default};
